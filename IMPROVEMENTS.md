# 内容深度优化说明

## 已完成的改进

### 1. 提示词大幅优化

#### 写作模板改进（WRITER_PROMPT_TEMPLATE）
- ✅ **明确目标阅读时间**：约5分钟（1500-2000字）
- ✅ **每章详细要求**：为每个章节指定了最低篇幅要求
- ✅ **深度分析要求**：强调不仅要描述"是什么"，更要分析"为什么"和"意味着什么"
- ✅ **具体章节改进**：
  - **Open remarks**: 从简短介绍改为2-3段（200-300字），要求生动的场景和引人思考的观点
  - **Founding story**: 从简短描述改为3-4段（300-400字），要求详细的创业历程和故事
  - **Development journey**: 每个节点从简单描述改为1-2段，总共5-7段（500-700字）
  - **Core business**: 从简单介绍改为4-5段（400-500字），要求详细的产品、客户、商业模式分析
  - **Opportunity set**: 从简单列表改为4-5段（400-500字），要求深入分析每条增长主线
  - **Challenges**: 从简单列举改为3-4段（300-400字），要求具体分析和深层原因
  - **Financial driver**: 从简单数据改为4-5段（400-500字），要求解释数字背后的故事
  - **Industry study**: 从简单描述改为3-4段（300-400字），要求深入分析行业规律
  - **Competitors**: 从简单列举改为5-6段（500-600字），要求"对手叙事短传记"式的详细分析
  - **Market sentiment**: 从几句话改为2-3段（300-400字），要求深度市场分析
  - **What to watch**: 从一句话改为每个信号2-4句话，总共8-10个信号（400-500字）

#### Fact Pack 生成改进
- ✅ 要求生成**更详细和全面**的信息
- ✅ 强调需要包含足够丰富的信息和细节
- ✅ 要求详细的竞争对手描述、风险分析、新闻摘要等

### 2. 技术参数优化

- ✅ **默认 max_output_tokens**: 从 12000 增加到 16000
- ✅ 支持更长的输出，满足5分钟阅读时间的要求

### 3. 质量要求提升

- ✅ 强调**洞察力**：提供独到见解
- ✅ 要求**具体例子**：用数据、故事、案例支撑观点
- ✅ 避免**空洞概括**：每个章节都要有实质内容
- ✅ **全面理解**：让读者通过一篇文章对公司有全面而深入的理解

## 使用方法

### 清除缓存重新生成

由于之前有缓存，建议清除缓存或使用 `--no-cache` 来生成新的深度内容：

```bash
# 方式1: 删除缓存文件
rm cache/lulu_2026-01-04.json

# 方式2: 使用 --no-cache 参数
python3 company_story.py "LULU" --api-key "你的API_KEY" --no-cache --max-output-tokens 16000
```

### 生成新公司

```bash
# 生成 Apple 的深度故事
python3 company_story.py "AAPL" --api-key "你的API_KEY" --max-output-tokens 16000

# 生成 Tesla 的深度故事
python3 company_story.py "TSLA" --api-key "你的API_KEY" --max-output-tokens 16000
```

## 预期改进效果

1. **内容更丰富**：每章都有足够的篇幅和深度
2. **分析更深入**：不仅描述事实，更提供洞察
3. **可读性更强**：有故事、有数据、有分析
4. **信息更全面**：读者能通过一篇文章对公司有全面了解
5. **阅读时间**：达到约5分钟的阅读时间

## 注意事项

- 生成时间可能会稍长（因为内容更详细）
- API 调用成本会稍高（因为 token 数增加）
- 建议使用 `--cache` 避免重复生成（默认开启）

